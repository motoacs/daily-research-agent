[run]
output_dir = "../outputs"
timezone = "Asia/Tokyo"
max_web_queries = 20
include_run_artifacts = true
state_dir = "../state"

[models]
# OpenRouter model IDs (provider/model), e.g. "openai/gpt-5.2".
main = "openai/gpt-5.2"
writer = "anthropic/claude-sonnet-4-5"

[prompts]
language = "ja"
source_priority = """
- 可能な限り一次資料（公式ドキュメント、技術論文、リリースノートなど）を優先する
- 複数の独立した情報源を参照する
- 証拠が不十分な場合は、不確実性を明確に記載する
"""

[prompts.presets.daily_ai_news]
name = "Daily AI News (JP)"
prompt = """
あなたは研究＋執筆の専門家です。
{date}の日本語デイリーリサーチ記事を作成してください。
重要で実行可能、かつ出典に基づく情報に焦点を当ててください。
X件のブックマークがある場合は参考として使用できますが、一字一句そのまま引用しないでください。
必ず記事の最後に参考文献（URLs）を明記してください。
"""

[presets.daily_ai_news]
template = "../templates/article_default.toml"
prompt_id = "daily_ai_news"

[sources]
daily_sites = [
  "https://news.ycombinator.com/",
  "https://www.reddit.com/r/MachineLearning/",
  "https://openai.com/ja-JP/news/",
]

[logging]
level = "INFO"
format = "json"
to_stdout = true
to_file = true

[x]
enabled = true
bookmarks_count = 10
usage_policy = """
Xのブックマークは、私が今日特に関心を持っている事柄のヒントです。
投稿内容を一字一句そのまま引用せず、要約した上でウェブ上の情報源を参照して調査してください。
引用する場合は、必ず元の投稿URLを参考文献として記載してください。
"""

[x.cache]
enabled = true
# Cache is used to avoid re-fetching already-seen bookmarks (cost control).
path = "../state/x_bookmarks_cache.sqlite"
stop_on_seen_streak = 5
max_cached_posts = 20000

[x.quote]
# Whether to resolve quoted posts and include them in the structured input.
resolve_depth = 2

[mcp]
servers = [
  { name = "perplexity", transport = "stdio", command = "npx", args = ["-y", "@perplexity-ai/mcp-server"] },
]

[observability.langsmith]
enabled = true
project = "daily-research-agent"
# endpoint is configured via env var LANGSMITH_ENDPOINT
# api_key is configured via env var LANGSMITH_API_KEY
