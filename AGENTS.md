# daily-research-agent — AGENTS.md

このファイルは、Codex / Claude Code / Cursor / Copilot などの **AIエージェントがこのリポジトリを安全かつ一貫して開発するためのルール**です。
（AGENTS.md の仕様/思想は https://agents.md/ を参照）

この `AGENTS.md` は **リポジトリ全体**に適用され、サブディレクトリに追加された `AGENTS.md` がある場合はその指示が優先されます。

## 0. このプロジェクトの前提（必読）

- プロジェクト概要・スコープの一次情報は `docs/requirements.md`。
  - 実装・設計の判断に迷ったら、必ずここに立ち返る。
- 初期目標は「ローカルで定時リサーチ→Markdown記事生成」まで（デプロイやUIは対象外）。

## 1. ゴールデンルール（最重要）

- 依存管理は **uv** のみ（`python` / `pip` コマンドは禁止）。
  - 追加は `uv add ...`、実行は `uv run ...` を使う。
- 変更は **最小差分**で、要求範囲外の改修・リネーム・整形をしない。
- 秘密情報（APIキー、トークン、Cookie、個人情報）を **コミットしない**。
  - 設定は環境変数（必要なら `.env`）で扱い、`.env` は Git 管理しない。
- 外部情報（Web / X 等）を扱う場合は **過剰転載を避け**、URL等の出典を残す。

## 2. 作業の進め方（AIエージェント向け）

- まず `docs/requirements.md` と既存コードを読み、作業単位を小さく切って進める。
- 追加ファイルを作るときは、後から探索しやすい命名と配置にする（例: `src/`, `docs/`, `scripts/` など）。
- 生成物（記事Markdown、調査メモ、キャッシュ等）は **コードと分離**し、Git管理する/しないを明確化する。
  - リポジトリに保存する運用にする場合でも、肥大化しやすい中間生成物は `.gitignore` 対象にする。

## 3. よく使うコマンド（uv）

- 依存追加: `uv add <package>`
- 実行: `uv run <command>`
- テスト: `uv run pytest`（導入されている場合）
- Lint/Format: `uv run ruff check .` / `uv run ruff format .`（導入されている場合）

## 4. 設計・実装ガイド

- CLI前提：ユーザーが「コマンド1つ」で記事Markdownを生成できる体験を優先。
  - CLIを追加する場合は `pyproject.toml` の `[project.scripts]` を使い、`uv run <script>` で呼べる形にする。
- “エージェンティック”要件：不足情報の検知→追加調査→統合→出力、の流れが追える構造にする。
  - 可能なら「参照ソース」「調査メモ」「採用/非採用理由」を後から辿れる形で残す。
- 取り込み先（想定）：
  - Perplexity MCP Server（複数ソース参照）
  - X API（ブックマークを新しい順にN件取得）

## 5. セキュリティ / 安全設計

- ファイル操作はこのリポジトリ配下に限定し、意図しない読み書きを避ける。
- X上のコンテンツは規約・権利に配慮し、記事には短い引用・要約・URL参照を基本とする。

## 6. AGENTS.md の運用（追加ルールの置き場所）

- ディレクトリごとに追加ルールが必要になったら、その配下に `AGENTS.md` を追加する。
  - 例: `src/AGENTS.md`（コード規約）、`docs/AGENTS.md`（文章規約）など
- 競合する場合は「より近いディレクトリの `AGENTS.md`」を優先する（agents.md の推奨に従う）。
